# Example librechat.yml configuration for GitLab MCP integration
# For LibreChat MCP documentation: https://www.librechat.ai/docs/features/mcp

mcpServers:
  gitlab:
    # HTTP transport configuration (recommended)
    type: streamable-http
    url: "http://localhost:8008/message"
    
    # Server configuration
    serverInstructions: |
      You have access to GitLab through the GitLab MCP server. This server provides comprehensive search 
      and exploration capabilities perfect for analyzing GitLab repositories, issues, and merge requests.
      
      Key capabilities:
      - Search across projects, issues, and merge requests globally
      - Browse repository structure and read file contents
      - Create issues and merge requests (with user authentication)
      - Find users and groups
      
      For write operations, users will be prompted for their GitLab Personal Access Token.
    
    # Timeouts
    initTimeout: 30000
    timeout: 120000
    
    # User-specific variables for authentication
    customUserVars:
      GITLAB_ACCESS_TOKEN:
        title: "GitLab Personal Access Token"
        description: "Your GitLab Personal Access Token with 'api' scope for full functionality or 'read_api' for read-only access"
        type: password
        required: false
      GITLAB_USER_URL:
        title: "GitLab Instance URL (Optional)"
        description: "Your GitLab instance URL (leave empty to use server default)"
        type: url
        required: false

---

# Alternative configuration using Docker container directly
# mcpServers:
#   gitlab:
#     command: docker
#     args:
#       - run
#       - --rm
#       - -i
#       - -p=8008:8008
#       - --name=gitlab-mcp-server
#       - -e=GITLAB_URL=${GITLAB_URL:-https://gitlab.com}
#       - -e=GITLAB_AUTH_MODE=${GITLAB_AUTH_MODE:-hybrid}  
#       - -e=GITLAB_SHARED_ACCESS_TOKEN=${GITLAB_SHARED_ACCESS_TOKEN:-}
#       - -e=PORT=8008
#       - -e=MCP_TRANSPORT=http
#       - gitlab-mcp-server
#     type: streamable-http
#     url: "http://localhost:8008/message"

---

# Configuration for development with local npm package
# mcpServers:
#   gitlab:
#     command: npx
#     args: 
#       - "-y"
#       - "gitlab-mcp-server"
#     type: stdio
#     env:
#       GITLAB_URL: "${GITLAB_URL:-https://gitlab.com}"
#       GITLAB_AUTH_MODE: "${GITLAB_AUTH_MODE:-hybrid}"
#       GITLAB_SHARED_ACCESS_TOKEN: "${GITLAB_SHARED_ACCESS_TOKEN:-}"
#     customUserVars:
#       GITLAB_ACCESS_TOKEN:
#         title: "GitLab Personal Access Token"
#         description: "Your GitLab PAT with 'api' or 'read_api' scope"
#         type: password